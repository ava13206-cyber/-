<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>å°ç£å°å­©éé¦¬è·¯æ¨¡æ“¬å™¨ (Taiwan Survival Crossing)</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            background-color: #222;
            color: #eee;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        #game-wrapper {
            position: relative;
            box-shadow: 0 0 30px rgba(0,0,0,0.7);
        }
        canvas {
            background-color: #444; /* æŸæ²¹è·¯ */
            display: block;
            border-radius: 4px;
        }
        /* UI ä»‹é¢å±¤ */
        .ui-overlay {
            position: absolute;
            pointer-events: none;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 10px;
            box-sizing: border-box;
        }
        .status-bar {
            background: rgba(0, 0, 0, 0.6);
            padding: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            font-size: 18px;
            font-weight: bold;
        }
        .light-signal {
            padding: 5px 10px;
            border-radius: 4px;
            text-shadow: 1px 1px 2px black;
        }
        .red-light { background-color: #d32f2f; color: white; box-shadow: 0 0 10px #d32f2f; }
        .green-light { background-color: #388e3c; color: white; box-shadow: 0 0 10px #388e3c; }
        .yellow-light { background-color: #fbc02d; color: black; box-shadow: 0 0 10px #fbc02d; }

        /* è­¦å‘Šè¨Šæ¯ */
        #warning-text {
            text-align: center;
            font-size: 24px;
            color: #ffeb3b;
            font-weight: bold;
            text-shadow: 2px 2px 0px #000;
            display: none;
            animation: pulse 0.8s infinite;
        }
        @keyframes pulse { 50% { opacity: 0.5; transform: scale(0.95); } }

        /* éŠæˆ²çµæŸ/é–‹å§‹é¸å–® */
        #menu-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(20, 20, 20, 0.95);
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #fff;
            pointer-events: auto;
            max-width: 80%;
        }
        h1 { margin: 0 0 10px 0; font-size: 24px; color: #4fc3f7; }
        p { font-size: 16px; line-height: 1.6; color: #ccc; }
        .highlight { color: #ffeb3b; font-weight: bold; }
        button {
            margin-top: 20px;
            padding: 12px 30px;
            font-size: 20px;
            cursor: pointer;
            background: #ff5722;
            color: white;
            border: none;
            border-radius: 50px;
            transition: transform 0.1s;
        }
        button:active { transform: scale(0.95); }

        /* æ‰‹æ©Ÿæ§åˆ¶æ¿ */
        #mobile-controls {
            display: none;
            width: 100%;
            height: 120px;
            position: absolute;
            bottom: 0;
            left: 0;
            pointer-events: auto;
        }
        .d-pad {
            width: 120px;
            height: 120px;
            position: relative;
            margin: 0 auto;
        }
        .btn {
            position: absolute;
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
        }
        .btn-up { top: 0; left: 40px; }
        .btn-down { bottom: 0; left: 40px; }
        .btn-left { top: 40px; left: 0; }
        .btn-right { top: 40px; right: 0; }
        
        @media (max-width: 768px) {
            #mobile-controls { display: block; }
            .info-text { display: none; } /* æ‰‹æ©Ÿéš±è—èªªæ˜æ–‡å­—ä»¥çœç©ºé–“ */
        }
    </style>
</head>
<body>

    <div id="game-wrapper">
        <canvas id="gameCanvas" width="600" height="600"></canvas>
        
        <div class="ui-overlay">
            <div class="status-bar">
                <div id="signal-box" class="light-signal red-light">ğŸ”´ ç´…ç‡ˆ (ç­‰å¾…)</div>
                <div>â±ï¸ <span id="timer">0</span>s</div>
            </div>
            <div id="warning-text">âš ï¸ æ³¨æ„è½‰å½è»Šï¼(AæŸ±æ­»è§’)</div>
        </div>

        <div id="menu-modal">
            <h1 id="menu-title">ğŸš¸ å°ç£å°å­©éé¦¬è·¯</h1>
            <div id="menu-content">
                <p>æ¨¡æ“¬ 6 æ­²å…’ç«¥è¦–è§’ (èº«é«˜115cm)ã€‚<br>
                <span class="highlight">ç‰¹é»ï¼šèµ°å¾—æ…¢ã€é§•é§›çœ‹ä¸åˆ°ä½ ã€‚</span></p>
                <p style="text-align:left; font-size:14px; background:#333; padding:10px; border-radius:5px;">
                    ğŸš¦ <b>ç´…ç‡ˆ</b>ï¼šå·¦å³ç›´è¡Œè»Šæµï¼ˆçµ•å°ä¸èƒ½èµ°ï¼‰<br>
                    ğŸŸ¢ <b>ç¶ ç‡ˆ</b>ï¼šç›´è¡Œè»Šåœï¼Œä½†æœƒæœ‰<b>è½‰å½è»Š</b>èˆ‡<b>é‘½è»Šç¸«æ©Ÿè»Š</b><br>
                    ğŸƒ <b>æ“ä½œ</b>ï¼šéµç›¤ä¸Šä¸‹å·¦å³ / é»æ“Šç•«é¢ / æ‰‹æ©Ÿè§¸æ§
                </p>
            </div>
            <button onclick="startGame()">é–‹å§‹éé¦¬è·¯</button>
        </div>

        <div id="mobile-controls">
            <div class="d-pad">
                <div class="btn btn-up" ontouchstart="keys['ArrowUp']=true" ontouchend="keys['ArrowUp']=false"></div>
                <div class="btn btn-down" ontouchstart="keys['ArrowDown']=true" ontouchend="keys['ArrowDown']=false"></div>
                <div class="btn btn-left" ontouchstart="keys['ArrowLeft']=true" ontouchend="keys['ArrowLeft']=false"></div>
                <div class="btn btn-right" ontouchstart="keys['ArrowRight']=true" ontouchend="keys['ArrowRight']=false"></div>
            </div>
        </div>
    </div>

    <p class="info-text" style="margin-top:10px; font-size:14px; color:#888;">
        * æ­¤æ¨¡æ“¬å™¨åƒè€ƒå°ç£å¯¦éš›è·¯æ³ï¼šç¶ ç‡ˆæ™‚è¡Œäººä»éœ€é–ƒé¿è½‰å½è»Šè¼›ã€‚
    </p>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    // DOM å…ƒç´ 
    const signalBox = document.getElementById('signal-box');
    const timerEl = document.getElementById('timer');
    const warningText = document.getElementById('warning-text');
    const modal = document.getElementById('menu-modal');
    const menuTitle = document.getElementById('menu-title');
    const menuContent = document.getElementById('menu-content');

    // éŠæˆ²åƒæ•¸è¨­å®š
    const GAME_WIDTH = 600;
    const GAME_HEIGHT = 600;
    const LANE_HEIGHT = 100;
    const PLAYER_SIZE = 14; // å…’ç«¥é«”ç©å°
    
    // æ“¬çœŸåƒæ•¸ï¼šå…’ç«¥æ­¥è¡Œé€Ÿåº¦ç´„ 0.9m/sï¼Œæˆäººç´„ 1.4m/s
    // åœ¨æ­¤éŠæˆ²æ¯”ä¾‹å°ºä¸­ï¼Œè»Šé€Ÿç´„ 4-8 px/frameï¼Œå…’ç«¥è¨­ç‚º 1.2 px/frame
    const PLAYER_SPEED = 1.2; 

    // ç‹€æ…‹ç®¡ç†
    let gameState = 'MENU'; // MENU, PLAYING, GAMEOVER, WIN
    let frames = 0;
    let score = 0;
    let animationId;
    
    // è™ŸèªŒç³»çµ±
    let lightState = 'RED'; // RED, GREEN, YELLOW
    let lightTimer = 0; // å€’æ•¸è¨ˆæ™‚
    const RED_DURATION = 180; // 3ç§’ (60fps) - ç°¡åŒ–ç­‰å¾…æ™‚é–“
    const GREEN_DURATION = 1200; // 20ç§’ - æ¨¡æ“¬çœŸå¯¦éé¦¬è·¯æ™‚é–“å£“åŠ›
    const YELLOW_DURATION = 180; // 3ç§’

    // ç‰©ä»¶å®šç¾©
    let player = { x: 300, y: 580, width: PLAYER_SIZE, height: PLAYER_SIZE, color: '#03a9f4' };
    let vehicles = [];
    let particles = []; // ç¢°æ’ç‰¹æ•ˆ

    // è»Šç¨®è³‡æ–™åº« (å°ç£å¸¸è¦‹è»Šç¨®)
    const VEHICLE_TYPES = {
        SCOOTER: { w: 20, h: 40, color: '#ffeb3b', speedBase: 6, name: 'æ©Ÿè»Š (é‘½è»Šç¸«)' },
        SEDAN:   { w: 40, h: 70, color: '#e0e0e0', speedBase: 4, name: 'è½è»Š' },
        SUV:     { w: 45, h: 80, color: '#546e7a', speedBase: 4.5, name: 'ä¼‘æ—…è»Š (AæŸ±æ­»è§’)' },
        BUS:     { w: 55, h: 130, color: '#66bb6a', speedBase: 3, name: 'å…¬è»Š (å…§è¼ªå·®)' },
        TRUCK:   { w: 55, h: 110, color: '#8d6e63', speedBase: 3.5, name: 'è²¨è»Š' }
    };

    // è¼¸å…¥æ§åˆ¶
    const keys = {};
    window.addEventListener('keydown', e => keys[e.key] = true);
    window.addEventListener('keyup', e => keys[e.key] = false);
    
    // æ»‘é¼ é»æ“Šç§»å‹• (è¼”åŠ©)
    canvas.addEventListener('mousedown', (e) => {
        const rect = canvas.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const clickY = e.clientY - rect.top;
        // ç°¡å–®çš„é»æ“Šå°èˆªé‚è¼¯
        if(clickY < player.y) keys['ArrowUp'] = true;
        if(clickY > player.y) keys['ArrowDown'] = true;
        if(clickX < player.x) keys['ArrowLeft'] = true;
        if(clickX > player.x) keys['ArrowRight'] = true;
        
        setTimeout(() => {
            keys['ArrowUp'] = false; keys['ArrowDown'] = false;
            keys['ArrowLeft'] = false; keys['ArrowRight'] = false;
        }, 200);
    });

    function startGame() {
        gameState = 'PLAYING';
        modal.style.display = 'none';
        resetGame();
        loop();
    }

    function resetGame() {
        player.x = GAME_WIDTH / 2;
        player.y = 580;
        vehicles = [];
        particles = [];
        frames = 0;
        lightState = 'RED';
        lightTimer = RED_DURATION;
        keys['ArrowUp'] = false; keys['ArrowDown'] = false;
        keys['ArrowLeft'] = false; keys['ArrowRight'] = false;
        
        // åˆå§‹ç”Ÿæˆä¸€äº›æ©«å‘è»Šæµ
        for(let i=0; i<8; i++) spawnHorizontalTraffic(true);
    }

    // æ ¸å¿ƒç”Ÿæˆé‚è¼¯ï¼šæ¨¡æ“¬å°ç£äº¤é€š
    function spawnManager() {
        // 1. ç´…ç‡ˆæ™‚ï¼šæ©«å‘é«˜é€Ÿè»Šæµ (çµ•å°æ­»å€)
        if (lightState === 'RED') {
            if (frames % 15 === 0) spawnHorizontalTraffic();
        }
        
        // 2. ç¶ ç‡ˆæ™‚ï¼šç¸±å‘/è½‰å½è»Šæµ (é€™æ‰æ˜¯éŠæˆ²é‡é»)
        // åœ¨å°ç£ï¼Œç¶ ç‡ˆæ™‚è¡Œäººè¦é¢å°ã€Œå·¦è½‰è»Šã€å’Œã€Œå³è½‰è»Šã€
        if (lightState === 'GREEN' || lightState === 'YELLOW') {
            // é™ä½ç”Ÿæˆé »ç‡ï¼Œä½†å¢åŠ è‡´å‘½æ€§ (è½‰å½)
            // é »ç‡éš¨æ™‚é–“å¢åŠ ï¼Œæ¨¡æ“¬ç´…ç¶ ç‡ˆå¿«çµæŸæ™‚è»Šå­æ¶å¿«
            let rate = 50;
            if (lightState === 'YELLOW') rate = 20; // é»ƒç‡ˆæ¶å¿«

            if (frames % rate === 0) {
                spawnTurningTraffic();
            }
        }
    }

    function spawnHorizontalTraffic(isInit = false) {
        // 0-3 æ˜¯è»Šé“ ID (0,1 å‘å³, 2,3 å‘å·¦)
        let lane = Math.floor(Math.random() * 4);
        let yPos = 100 + lane * 100 + 50; // è»Šé“ä¸­å¿ƒ
        let dir = (lane < 2) ? 1 : -1;
        
        // éš¨æ©Ÿè»Šç¨®
        let typeKey = Math.random() > 0.3 ? (Math.random() > 0.5 ? 'SCOOTER' : 'SEDAN') : 'BUS';
        if (Math.random() > 0.8) typeKey = 'SUV';
        
        let type = VEHICLE_TYPES[typeKey];
        let xPos = (dir === 1) ? -100 : GAME_WIDTH + 100;
        
        if (isInit) xPos = Math.random() * GAME_WIDTH;

        vehicles.push({
            x: xPos,
            y: yPos,
            vx: type.speedBase * dir * (Math.random() * 0.4 + 0.8), // é€Ÿåº¦æµ®å‹•
            vy: 0,
            w: type.h, // æ©«å‘æ™‚ï¼Œé•·å¯¬äº’æ›
            h: type.w,
            color: type.color,
            type: typeKey,
            angle: (dir === 1) ? 0 : Math.PI
        });
    }

    function spawnTurningTraffic() {
        // æ¨¡æ“¬è½‰å½è»Šï¼šå¾ç•«é¢ä¸Šæ–¹æˆ–ä¸‹æ–¹é€²å…¥ï¼Œç›®æ¨™æ˜¯åˆ‡éæ–‘é¦¬ç·š
        // å·¦è½‰è»Šæœ€å±éšª
        let startTop = Math.random() > 0.5; // true: å¾ä¸Šæ–¹ä¸‹ä¾†, false: å¾ä¸‹æ–¹ä¸Šå»
        let startX = Math.random() * GAME_WIDTH;
        
        // è¨­å®šç›®æ¨™é»ï¼šç©å®¶é™„è¿‘çš„å€åŸŸ (æ¨¡æ“¬é§•é§›æ²’çœ‹åˆ°å°å­©)
        // åŠ ä¸Šéš¨æ©Ÿåç§»
        let targetX = player.x + (Math.random() * 200 - 100); 
        let targetY = player.y;

        let typeKey = Math.random() > 0.5 ? 'SUV' : (Math.random() > 0.5 ? 'SCOOTER' : 'BUS');
        let type = VEHICLE_TYPES[typeKey];
        
        // è¨ˆç®—å‘é‡
        let dx = targetX - startX;
        let dy = targetY - (startTop ? -50 : GAME_HEIGHT + 50);
        let dist = Math.sqrt(dx*dx + dy*dy);
        
        let speed = type.speedBase * 0.7; // è½‰å½é€Ÿåº¦ç¨æ…¢
        
        vehicles.push({
            x: startX,
            y: startTop ? -80 : GAME_HEIGHT + 80,
            vx: (dx / dist) * speed,
            vy: (dy / dist) * speed,
            w: type.w,
            h: type.h,
            color: type.color,
            type: typeKey,
            angle: Math.atan2(dy, dx) + Math.PI/2 // è»Šé ­æœå‘
        });
    }

    function update() {
        // æ›´æ–°è™ŸèªŒ
        lightTimer--;
        if (lightTimer <= 0) {
            if (lightState === 'RED') {
                lightState = 'GREEN';
                lightTimer = GREEN_DURATION;
                signalBox.className = 'light-signal green-light';
                signalBox.innerText = 'ğŸŸ¢ ç¶ ç‡ˆ (å°å¿ƒè½‰å½è»Š)';
                warningText.style.display = 'block';
            } else if (lightState === 'GREEN') {
                lightState = 'YELLOW';
                lightTimer = YELLOW_DURATION;
                signalBox.className = 'light-signal yellow-light';
                signalBox.innerText = 'ğŸŸ¡ é»ƒç‡ˆ (å¿«è·‘!)';
                warningText.style.display = 'none';
            } else {
                lightState = 'RED';
                lightTimer = RED_DURATION;
                signalBox.className = 'light-signal red-light';
                signalBox.innerText = 'ğŸ”´ ç´…ç‡ˆ (åœ)';
            }
        }
        
        // é¡¯ç¤ºå€’æ•¸
        timerEl.innerText = Math.ceil(lightTimer / 60);

        // ç©å®¶ç§»å‹•
        if (keys['ArrowUp']) player.y -= PLAYER_SPEED;
        if (keys['ArrowDown']) player.y += PLAYER_SPEED;
        if (keys['ArrowLeft']) player.x -= PLAYER_SPEED;
        if (keys['ArrowRight']) player.x += PLAYER_SPEED;

        // é‚Šç•Œé™åˆ¶
        if (player.x < 0) player.x = 0;
        if (player.x > GAME_WIDTH) player.x = GAME_WIDTH;
        if (player.y > 600) player.y = 600;

        // å‹åˆ©æ¢ä»¶ï¼šåˆ°é”å°é¢
        if (player.y < 50) {
            gameOver(true);
            return;
        }

        // è»Šè¼›æ›´æ–°
        spawnManager();
        
        for (let i = vehicles.length - 1; i >= 0; i--) {
            let v = vehicles[i];
            v.x += v.vx;
            v.y += v.vy;

            // ç§»é™¤å‡ºç•Œè»Šè¼›
            if (v.x < -150 || v.x > GAME_WIDTH + 150 || v.y < -150 || v.y > GAME_HEIGHT + 150) {
                vehicles.splice(i, 1);
                continue;
            }

            // ç¢°æ’åµæ¸¬ (ç°¡å–® AABB åŠ ä¸Šä¸€é»å¯¬å®¹åº¦ï¼Œå› ç‚ºè»Šå­æœ‰æ—‹è½‰)
            // é€™è£¡ç‚ºäº†ç°¡å–®ä½¿ç”¨çŸ©å½¢è·é›¢ï¼Œå¯¦éš›ä¸Šè½‰å½è»Šæœ‰è§’åº¦ï¼Œä½†å°å°å­©ä¾†èªªç¢°æ’å°±æ˜¯ç¢°æ’
            let hitDist = (v.w + v.h) / 4 + PLAYER_SIZE; // ç²—ç•¥åŠå¾‘
            let dist = Math.hypot(player.x - v.x, player.y - v.y);
            
            if (dist < hitDist) {
                createExplosion(player.x, player.y);
                gameOver(false, VEHICLE_TYPES[v.type].name);
                return;
            }
        }
        
        // ç²’å­æ›´æ–°
        particles.forEach((p, i) => {
            p.x += p.vx;
            p.y += p.vy;
            p.life--;
            if(p.life <= 0) particles.splice(i, 1);
        });
    }

    function draw() {
        // æ¸…ç©ºç•«å¸ƒ
        ctx.fillStyle = '#333';
        ctx.fillRect(0, 0, GAME_WIDTH, GAME_HEIGHT);

        // ç•«æ–‘é¦¬ç·š (ç¸±å‘)
        ctx.fillStyle = '#eee';
        for (let i = 50; i < GAME_WIDTH; i += 60) {
            ctx.fillRect(i, 50, 30, 500);
        }
        
        // ç•«åˆ†éš”å³¶/è»Šé“ç·š (æ©«å‘)
        ctx.fillStyle = '#ffeb3b'; // é»ƒç·š
        ctx.fillRect(0, 300 - 2, GAME_WIDTH, 4);
        ctx.fillStyle = '#fff'; // ç™½è™›ç·š
        for(let y of [200, 400]) {
            for(let x=0; x<GAME_WIDTH; x+=40) {
                ctx.fillRect(x, y, 20, 2);
            }
        }

        // ç•«è»Šè¼›
        vehicles.forEach(v => {
            ctx.save();
            ctx.translate(v.x, v.y);
            ctx.rotate(v.angle);
            
            // è»Šèº«
            ctx.fillStyle = v.color;
            // é™°å½±
            ctx.shadowColor = 'rgba(0,0,0,0.5)';
            ctx.shadowBlur = 10;
            // ç¹ªè£½çŸ©å½¢ (ä¸­å¿ƒé»)
            ctx.fillRect(-v.w/2, -v.h/2, v.w, v.h);
            
            // è»Šç‡ˆ (å¦‚æœæ˜¯æ™šä¸Šæˆ–ç‚ºäº†æ•ˆæœ)
            ctx.fillStyle = 'yellow';
            ctx.fillRect(-v.w/2 + 2, v.h/2 - 5, 5, 5); // é ­ç‡ˆ
            ctx.fillRect(v.w/2 - 7, v.h/2 - 5, 5, 5);
            
            // ç…è»Šç‡ˆ
            ctx.fillStyle = 'red';
            ctx.fillRect(-v.w/2 + 2, -v.h/2, 5, 5); 
            ctx.fillRect(v.w/2 - 7, -v.h/2, 5, 5);

            ctx.restore();
        });

        // ç•«ç©å®¶ (å°å­©)
        ctx.save();
        ctx.shadowColor = 'black';
        ctx.shadowBlur = 5;
        ctx.fillStyle = player.color;
        ctx.beginPath();
        ctx.arc(player.x, player.y, PLAYER_SIZE, 0, Math.PI * 2);
        ctx.fill();
        // èƒŒåŒ… (å¢åŠ å°å­©ç‰¹å¾µ)
        ctx.fillStyle = '#ff9800';
        ctx.beginPath();
        ctx.arc(player.x, player.y - 5, 6, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
        
        // ç•«ç²’å­
        particles.forEach(p => {
            ctx.fillStyle = p.color;
            ctx.fillRect(p.x, p.y, 3, 3);
        });
    }

    function createExplosion(x, y) {
        for(let i=0; i<20; i++) {
            particles.push({
                x: x, y: y,
                vx: (Math.random() - 0.5) * 10,
                vy: (Math.random() - 0.5) * 10,
                life: 30,
                color: 'red'
            });
        }
    }

    function gameOver(isWin, killer = '') {
        gameState = isWin ? 'WIN' : 'GAMEOVER';
        cancelAnimationFrame(animationId);
        
        modal.style.display = 'block';
        
        if (isWin) {
            menuTitle.innerText = "ğŸ‰ å®‰å…¨æŠµé”";
            menuContent.innerHTML = `<p>ä½ æˆåŠŸéé¦¬è·¯äº†ï¼<br>ä½†åœ¨çœŸå¯¦ä¸–ç•Œï¼Œä½ å¯èƒ½å› ç‚ºèº«é«˜å¤ªçŸ®ï¼Œ<br>é§•é§›å‰›æ‰æ ¹æœ¬æ²’çœ‹åˆ°ä½ ã€‚</p>`;
        } else {
            menuTitle.innerText = "ğŸ’¥ ç™¼ç”Ÿäº‹æ•…";
            menuContent.innerHTML = `<p>ä½ è¢« <b>${killer}</b> æ’ä¸Šäº†ã€‚</p>
            <p style="color:#ff9999">
                åŸå› åˆ†æï¼š<br>
                1. å°å­©è¦–é‡ä½ï¼Œçœ‹ä¸åˆ°é è™•ä¾†è»Šã€‚<br>
                2. å°å­©ç§»å‹•æ…¢ï¼Œç„¡æ³•å¿«é€Ÿé–ƒé¿ã€‚<br>
                3. å°ç£é§•é§›ç¿’æ…£åˆ‡è¥¿ç“œæˆ–æ¶å¿«ã€‚
            </p>`;
        }
    }

    function loop() {
        if (gameState !== 'PLAYING') return;
        
        frames++;
        update();
        draw();
        animationId = requestAnimationFrame(loop);
    }

    // åˆå§‹ç•«é¢
    draw();

</script>
</body>
</html>